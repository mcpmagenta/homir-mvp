// This goes in your prisma/schema.prisma file

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_POSTGRES_PRISMA_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id            String    @id @default(uuid())
  email         String    @unique
  password      String
  role          Role
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  profile       Profile?
  jobsPosted    Job[]     @relation("UserJobs")
  applications  JobApplication[]
}

model Profile {
  id        String   @id @default(uuid())
  userId    String   @unique
  firstName String?
  lastName  String?
  location  String?
  bio       String?
  skills    String?
  user      User     @relation(fields: [userId], references: [id])
}

model Job {
  id           String   @id @default(uuid())
  recipientId  String
  title        String
  description  String
  location     String
  serviceType  ServiceType
  status       JobStatus @default(OPEN)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  recipient    User      @relation("UserJobs", fields: [recipientId], references: [id])
  applications JobApplication[]
}

model JobApplication {
  id          String      @id @default(uuid())
  jobId       String
  caregiverId String
  status      ApplicationStatus @default(APPLIED)
  createdAt   DateTime    @default(now())
  job         Job         @relation(fields: [jobId], references: [id])
  caregiver   User        @relation(fields: [caregiverId], references: [id])
}

enum Role {
  CAREGIVER
  RECIPIENT
}

enum ServiceType {
  HOME_CARE
  SENIOR_CARE
  CHILD_CARE
}

enum JobStatus {
  OPEN
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

enum ApplicationStatus {
  APPLIED
  ACCEPTED
  REJECTED
  COMPLETED
}